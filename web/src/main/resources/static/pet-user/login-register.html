<!doctype html>
<html class="no-js" lang="zxx">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>千宠网 - The Best Online Pet Market</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.png">

    <!-- all css here -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/simple-line-icons.css">
    <link rel="stylesheet" href="assets/css/themify-icons.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/meanmenu.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <script src="assets/js/vendor/modernizr-2.8.3.min.js"></script>
</head>
<body id="changePage">
<header class="header-area">
    <div class="header-top theme-bg">
        <div class="container">
        </div>
    </div>
    <div class="header-bottom transparent-bar">
        <div class="container">
            <div class="row">
                <div class="col-xl-2 col-lg-3 col-md-4 col-sm-4 col-5">
                    <div class="logo pt-39">
                        <a href="index.html"><img alt="" src="assets/img/logo/logo.png"></a>
                    </div>
                </div>
                <div class="col-xl-8 col-lg-7 d-none d-lg-block">
                    <div class="main-menu text-center">
                        <nav>
                            <ul>
                                <li><a href="index.html"><font style="vertical-align: inherit;"><font
                                        style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font
                                        style="vertical-align: inherit;">home</font></font></font></font></a>

                                </li>
                                <li class="mega-menu-position"><a href="shop-page.html"><font
                                        style="vertical-align: inherit;"><font
                                        style="vertical-align: inherit;">宠物</font></font></a>

                                </li>
                                <li>
                                    <a href="cart.html"><font style="vertical-align: inherit;"><font
                                            style="vertical-align: inherit;">购物车</font></font></a>
                                </li>
                                <li>
                                    <a href="checkout.html"><font style="vertical-align: inherit;"><font
                                            style="vertical-align: inherit;">订单</font></font></a>
                                </li>

                                <li>
                                    <a onclick="checkMyaccount()"><font style="vertical-align: inherit;"><font
                                            style="vertical-align: inherit;">我的帐户</font></font></a>
                                </li>
                                <li><a href="about-us.html"><font style="vertical-align: inherit;"><font
                                        style="vertical-align: inherit;">关于</font></font></a></li>
                                <li><a href="contact.html"><font style="vertical-align: inherit;"><font
                                        style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font
                                        style="vertical-align: inherit;">联系我们</font></font></font></font></a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
                <div class="col-xl-2 col-lg-2 col-md-8 col-sm-8 col-7">
                    <div class="search-login-cart-wrapper">
                        <div class="header-search same-style">
                            <button class="search-toggle">
                                <i class="icon-magnifier s-open"></i>
                                <i class="ti-close s-close"></i>
                            </button>
                            <div class="search-content">
                                <form action="#" id="form1" method="get">
                                    <input type="text" id="showpet1" placeholder="搜索">
                                    <button type="submit" onclick="showpet()">
                                        <i class="icon-magnifier"></i>
                                    </button>

                                </form>
                            </div>
                        </div>


                        <div class="header-cart same-style">
                            <button class="icon-cart">
                                <i class="icon-handbag"></i>
                                <span class="count-style">0</span>
                            </button>
                            <div class="shopping-cart-content">
                                <ul>
                                </ul>
                                <div class="shopping-cart-total">
                                    <h4>
                                        <span>
													<font style="vertical-align: inherit;">
														<font style="vertical-align: inherit;">0</font>
													</font>
												</span>
                                    </h4>
                                    <h4>
                                        <font style="vertical-align: inherit;">
                                            <font style="vertical-align: inherit;">合计：</font>
                                        </font><span class="shop-total">
													<font style="vertical-align: inherit;">
														<font style="vertical-align: inherit;">￥ 0</font>
													</font>
												</span>
                                    </h4>
                                </div>
                                <div class="shopping-cart-btn">
                                    <a href="cart.html">
                                        <font style="vertical-align: inherit;">
                                            <font style="vertical-align: inherit;">查看购物车</font>
                                        </font>
                                    </a>
                                    <a href="checkout.html">
                                        <font style="vertical-align: inherit;">
                                            <font style="vertical-align: inherit;">结算</font>
                                        </font>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="header-login same-style" id="loginOnline">
                            <a href="login-register.html"><i class="icon-user icons" class="mega-menu-position"></i></a>
                        </div>
                    </div>
                </div>
                <div class="mobile-menu-area electro-menu d-md-block col-md-12 col-lg-12 col-12 d-lg-none d-xl-none">
                    <div class="mobile-menu">
                        <nav id="mobile-menu-active" style="display: block;">
                            <ul class="menu-overflow">
                                <li><a href="index.html">
                                    <font style="vertical-align: inherit;">
                                        <font style="vertical-align: inherit;">HOME</font>
                                    </font>
                                </a>

                                </li>
                                <li><a href="#">
                                    <font style="vertical-align: inherit;">
                                        <font style="vertical-align: inherit;">页数</font>
                                    </font>
                                </a>
                                    <ul>
                                        <li>
                                            <a href="about-us.html">
                                                <font style="vertical-align: inherit;">
                                                    <font style="vertical-align: inherit;">关于我们</font>
                                                </font>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="shop-page.html">
                                                <font style="vertical-align: inherit;">
                                                    <font style="vertical-align: inherit;">店铺页面</font>
                                                </font>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="shop-list.html">
                                                <font style="vertical-align: inherit;">
                                                    <font style="vertical-align: inherit;">店铺清单</font>
                                                </font>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="product-details.html">
                                                <font style="vertical-align: inherit;">
                                                    <font style="vertical-align: inherit;">宠物详情</font>
                                                </font>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="cart.html">
                                                <font style="vertical-align: inherit;">
                                                    <font style="vertical-align: inherit;">购物车页面</font>
                                                </font>
                                            </a>
                                        </li>

                                        <li>
                                            <a href="checkout.html">
                                                <font style="vertical-align: inherit;">
                                                    <font style="vertical-align: inherit;">查看订单</font>
                                                </font>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="wishlist.html">
                                                <font style="vertical-align: inherit;">
                                                    <font style="vertical-align: inherit;">愿望清单</font>
                                                </font>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="contact.html">
                                                <font style="vertical-align: inherit;">
                                                    <font style="vertical-align: inherit;">联系我们</font>
                                                </font>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="my-account.html">
                                                <font style="vertical-align: inherit;">
                                                    <font style="vertical-align: inherit;">我的帐户</font>
                                                </font>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="login-register.html">
                                                <font style="vertical-align: inherit;">
                                                    <font style="vertical-align: inherit;">登录/注册</font>
                                                </font>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#">
                                    <font style="vertical-align: inherit;">
                                        <font style="vertical-align: inherit;">宠物</font>
                                    </font>
                                </a>
                                </li>

                                <li><a href="contact.html">
                                    <font style="vertical-align: inherit;">
                                        <font style="vertical-align: inherit;"> 联系我们 </font>
                                    </font>
                                </a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
<div class="breadcrumb-area pt-95 pb-95 bg-img" style="background-image:url(assets/img/banner/banner-2.jpg);">
    <div class="container">
        <div class="breadcrumb-content text-center">
            <h2>
                <font style="vertical-align: inherit;">
                    <font style="vertical-align: inherit;">登录/注册</font>
                </font>
            </h2>
            <ul>
                <li><a href="index.html">
                    <font style="vertical-align: inherit;">
                        <font style="vertical-align: inherit;">HOME</font>
                    </font>
                </a></li>
                <li class="active">
                    <font style="vertical-align: inherit;">
                        <font style="vertical-align: inherit;">登录/注册</font>
                    </font>
                </li>
            </ul>
        </div>
    </div>
</div>
<div class="login-register-area pt-95 pb-100">
    <div class="container">
        <div class="row">
            <div class="col-lg-7 col-md-12 ml-auto mr-auto">
                <div class="login-register-wrapper">
                    <div class="login-register-tab-list nav">
                        <a class="active" data-toggle="tab" href="#lg1">
                            <h4>
                                <font style="vertical-align: inherit;">
                                    <font style="vertical-align: inherit;"> 登录 </font>
                                </font>
                            </h4>
                        </a>
                        <a data-toggle="tab" href="#lg2">
                            <h4>
                                <font style="vertical-align: inherit;">
                                    <font style="vertical-align: inherit;"> 注册 </font>
                                </font>
                            </h4>
                        </a>
                    </div>
                    <div class="tab-content">
                        <div id="lg1" class="tab-pane active">
                            <div class="login-form-container">
                                <div class="login-register-form">
                                    <form  id="loginForm">
                                        <input type="text" name="utel" id="logTel" placeholder="账号(电话)">
                                        <input type="password" name="upass" id="password" placeholder="密码">
                                        <div class="button-box">
                                            <div class="login-toggle-btn">
                                            </div>
                                            <label id="logError"></label>
                                            <button type="submit"><span>
                                                <font style="vertical-align: inherit;">
                                                    <font style="vertical-align: inherit;">登录</font>
                                                </font>
                                            </span></button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div id="lg2" class="tab-pane">
                            <div class="login-form-container">
                                <div class="login-register-form">
                                    <form οnsubmit="return false;" id="registerForm">
                                        <label id="ErrorTel"></label><input type="text" name="utel" id="utel"
                                                                            placeholder="电话(账号)">
                                        <label id="ErrorUpass1"></label><input type="password" name="upass" id="upass1"
                                                                               placeholder="密码">
                                        <label id="ErrorUpass2"></label><input type="password" id="upass2"
                                                                               placeholder="再次输入密码">
                                        <label id="ErrorUname"></label><input type="text" name="uname" id="uname"
                                                                              placeholder="用户名">
                                        <label id="ErrorUemail"></label><input name="uemail" id="uemail"
                                                                               placeholder="电子邮件" type="email">
                                        <label id="ErrorUpro"></label><input type="text" name="upro" id="upro"
                                                                             placeholder="安全问题(你的母校)">
                                        <div class="button-box">
                                            <button type="submit" id="btn"><span>
															<font style="vertical-align: inherit;">
																<font style="vertical-align: inherit;">注册</font>
															</font>
														</span></button>
                                            <label id="errorMsg"></label>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- all js here -->
<script src="assets/js/vendor/jquery-1.12.0.min.js"></script>
<script src="assets/js/popper.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/jquery.counterup.min.js"></script>
<script src="assets/js/waypoints.min.js"></script>
<script src="assets/js/elevetezoom.js"></script>
<script src="assets/js/jsonHandler.js"></script>
<script src="assets/js/owl.carousel.min.js"></script>
<script src="assets/js/plugins.js"></script>
<script src="assets/js/main.js"></script>
<script src="assets/js/cookie.js"></script>
<script src="assets/js/loginout.js"></script>
<a id="scrollUp" href="#top" style="display: none; position: fixed; z-index: 2147483647;"><i
        class="ti-arrow-up"></i></a>

<script type="text/javascript">
     $("#loginForm").submit(false);
    var rename = false;

    function checkTel() {
        //1.获取账号的值
        var utel = $("#utel").val();
        //2.定义正则
        var reg_tel = /^1[3456789]\d{9}$/;
        //3.判断，给出提示
        var flag = reg_tel.test(utel);

        if (flag) {
            $("#ErrorTel").html("");
        } else {
            $("#ErrorTel").html("<font color='red' style='font-size: 12px;'>格式错误</font>");
        }
        return flag;
    }

    //校验密码
    function checkPassword() {
        //1.获取密码值
        var password = $("#upass1").val();
        //2.定义正则
        var reg_password = /^\w{8,16}$/;
        //3.判断，给出提示信息
        var flag = reg_password.test(password);
        if (flag) {
            //密码合法
            $("#ErrorUpass1").html("");
        } else {
            //密码非法,加一个红色边框
            $("#ErrorUpass1").html("<font color='red' style='font-size: 12px;'>格式错误(8~16位)</font>");
        }
        return flag;
    }

    //校验邮箱
    function checkEmail() {
        //1.获取邮箱
        var email = $("#uemail").val();
        //2.定义正则
        var reg_email = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
        //3.判断
        var flag = reg_email.test(email);
        if (flag) {
            $("#ErrorUemail").html("");
        } else {
            $("#ErrorUemail").html("<font color='red' style='font-size: 12px;'>格式错误</font>");
        }
        return flag;
    }

    function checkuname() {
        //1.获取用户名
        var uname = $("#uname").val().trim();
        //2.定义正则
        var reg_uanme = /^[A-Za-z0-9_\-\u4e00-\u9fa5]+$/;
        //3.判断
        var flag = reg_uanme.test(uname);
        if (flag) {
            $("#ErrorUname").html("");
        } else {
            $("#ErrorUname").html("<font color='red' style='font-size: 12px;'>为空</font>");
        }
        return flag;
    }

    function checkPro() {
        //获取问题答案
        var pro = $("#upro").val().trim();
        //定义正则
        var reg_pro = /^[A-Za-z0-9_\-\u4e00-\u9fa5]+$/;
        //判断
        var flag = reg_pro.test(pro);
        if (flag) {
            $("#ErrorUpro").html("");
        } else {
            $("#ErrorUpro").html("<font color='red' style='font-size: 12px;'>为空</font>");
        }
        return flag;
    }

    function checkTelReplace() {
        //1.获取输入值
        //2.//ajax传输查询数据库
        $.post("/user/checkReplace", {
            utel: $("#utel").val()
        }, function (data) {
            if (data.msg == 'yes') {
                $("#ErrorTel").html("<font color='red' style='font-size: 12px;'>已存在用户名</font>");
                $("#btn").attr('disable', true);
                rename = false;
            } else {
                $("#ErrorTel").html("");
                $("#btn").attr('disable', false);
                rename = true;
            }
        })
    }

    //检查两次密码一样
    function doubleCheck() {
        var password1 = $("#upass1").val();
        var password2 = $("#upass2").val();
        if (password1 == password2) {
            $("#ErrorUpass2").html("");
            return true;
        } else {
            $("#ErrorUpass2").html("<font color='red' style='font-size: 12px;'>两次密码不一致</font>");
            return false;
        }
    }

    $(function () {
        $("#loginForm").submit(function () {
            //1.发送数据到服务器
            //吧表单数据转化为json格式

            $.post("/user/checkLogin",
                {utel: $("#logTel").val(), upass: $("#password").val()},
                function (data) {
                    alert(data.uname);
                    if (data.uname != null) {
                        $("#logError").html("");
                        cookie.setCookie("uname", data.uname, 500);
                        cookie.setCookie("utel", data.utel, 500);
                        cookie.setCookie("uemail", data.uemail, 500);
                        cookie.setCookie("uid", data.uid, 500);
                        goIndex();
                    } else {
                        $("#logError").html("<font color='red' style='font-size: 12px;'>账号或密码错误</font>");
                    }
                }, "json");

        })
    });


    $(function () {
        //当表单提交时，调用所有的校验方法
        $("#registerForm").submit(function () {
            //1.发送数据到服务器
            //如果Email,密码,账号,用户名,问题的格式没问题,而且账号没有重名,两次输入密码相同

            if (checkEmail() && checkPassword() && rename && checkPro() && checkTel() && checkuname() && checkuname() &&
                doubleCheck()) {
                //吧表单数据转化为json格式
                var strdata = $("#registerForm").serializeObject();
                var str = JSON.stringify(strdata); //转换成string数据
                //校验通过,发送ajax请求，提交表单的数据
                $.ajax({
                    // 编写json格式，设置属性和值
                    url: "/user/regist",
                    contentType: "application/json;charset=UTF-8",
                    data: str,
                    dataType: "json",
                    type: "post",
                    success: function (data) {

                        if (data.uname != null) {
                            cookie.setCookie("uname", data.uname, 500);
                            cookie.setCookie("utel", data.utel, 500);
                            cookie.setCookie("uemail", data.uemail, 500);
                            cookie.setCookie("uid", data.uid, 500);
                            goIndex();
                        } else {
                            $("#errorMsg").text("注册失败");
                        }
                    }
                });
            }
            //2.不让页面跳转
            return false;
            //如果这个方法没有返回值，或者返回为true，则表单提交，如果返回为false，则表单不提交
            //当某一个组件失去焦点是，调用对应的校验方法
        });
        $("#utel").blur(checkTelReplace);
        $("#utel").blur(checkTel);
        $("#upass1").blur(checkPassword);
        $("#upass2").blur(doubleCheck);
        $("#uemail").blur(checkEmail);
        $("#uname").blur(checkuname);
        $("#upro").blur(checkPro);
    })

    function goIndex() {
        location.href = "index.html";
    }
</script>
<script src="assets/js/loginout.js"></script>
<script src="assets/js/CartForbid.js"></script>
<div class="goog-te-spinner-pos">
    <div class="goog-te-spinner-animation">
        <svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px"
             height="96px" viewBox="0 0 66 66">
            <circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33"
                    r="30"></circle>
        </svg>
    </div>
</div>
</body>
</html>
